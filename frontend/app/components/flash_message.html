{% for message in get_flashed_messages(request) %}
<div 
    class="flash-message flash-animate h-fit min-w-[320px] max-w-[420px] px-6 py-4 z-50 fixed top-24 right-8 rounded-2xl border-l-8 border-accent-{{ message.category }}-500 bg-white font-medium text-base text-secondary-800 shadow-xl shadow-secondary-200/50 backdrop-blur-lg flex items-center gap-4 animate-in fade-in slide-in-from-top duration-500"
    role="alert"
>
    <span class="inline-flex items-center justify-center rounded-full w-8 h-8 text-xl bg-accent-{{ message.category }}-500/20 text-accent-{{ message.category }}-600">
        {% if message.category == "success" %}
            <i class="fa-solid fa-circle-check"></i>
        {% elif message.category == "error" %}
            <i class="fa-solid fa-circle-xmark"></i>
        {% elif message.category == "warning" %}
            <i class="fa-solid fa-triangle-exclamation"></i>
        {% else %}
            <i class="fa-solid fa-circle-info"></i>
        {% endif %}
    </span>
    <div class="flex-1 py-1 pr-3">
        <p class="whitespace-pre-wrap break-words text-secondary-800">{{ message.message }}</p>
    </div>
    <button
        type="button"
        class="ml-2 text-secondary-500 hover:text-secondary-800 rounded-full p-1 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary-300"
        aria-label="Dismiss alert"
        onclick="this.closest('.flash-message').remove();"
    >
        <i class="fa-solid fa-xmark"></i>
    </button>
</div>
<script>
    setTimeout(() => {
        document.querySelectorAll('.flash-message').forEach(el => el.remove());
    }, 5200); // Extended to 5.2 seconds for smoother closing
</script>
{% endfor %}